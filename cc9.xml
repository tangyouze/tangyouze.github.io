
<?xml version="1.0" encoding="UTF-8" ?>
<Module>
    <ModulePrefs title="Topcoder Widget" height="40" author="Google"
        author_email="rar.zip.7z@google.com">
        <Require feature="google.calendar-0.5" />
        <Require feature="google.calendar-0.5.read"/>
    </ModulePrefs>
    <Content type="html">
        <![CDATA[






<!DOCTYPE HTML>
<html>
<body>

<script>
function add() {
    google.calendar.addCalendar("en.usa#holiday@group.v.calendar.google.com",
            "US Holidays");
}
</script>

<script>

function eventsCallback(events){
    console.log(events);
}
function getCheckEvent(){
    console.log('get selected events');
    google.calendar.read.getEvents(
            eventsCallback, 'selected'
            );
}
function getPrefsCallback(prefs){
    google.calendar.subscribeToDataChange(getCheckEvent);
}
//google.calendar.getPreferences(getPrefsCallback);


var selectedEvent;
function subscribeEventCallback(calendarEvent) {
    selectedEvent = calendarEvent;
    var out;
    if (!calendarEvent) {
        // No event is onscreen.
        out = 'No Event Onscreen!';
        document.getElementById('btnSubmitToWS').style.display = 'none';
    } else {
        document.getElementById('btnSubmitToWS').style.display = 'block';
        var out = '';
        if ('title' in calendarEvent) {
            out += 'Title = ' + calendarEvent['title'] + '\n';
        }
        if ('location' in calendarEvent) {
            out += 'Location = ' + calendarEvent['location'] + '\n';
        }
        console.log(calendarEvent.attendeeCount);
    }
    console.log(out);
}
function SubmitToWS(){
    console.log(JSON.stringify(selectedEvent));
    return false;
}
function ReSubmitToWS(){
    console.log(JSON.stringify(selectedEvent));
    return false;
}
google.calendar.read.subscribeToEvents(subscribeEventCallback);



</script>
<center>
    <form>
        <button id="btnSubmitToWS" onclick="return SubmitToWS()">Submit to WS </button>
        <button id="btnReSubmitToWS" onclick="return ReSubmitToWS()">ReSubmit to WS </button>
    </form>

</center>

</body>
</html>







        ]]>
    </Content>
</Module>
